<!--
Google IO 2012 HTML5 Slide Template

Authors: Eric Bidelman <ebidel@gmail.com>
         Luke Mahe <lukem@google.com>

URL: https://code.google.com/p/io-2012-slides
-->
<!DOCTYPE html>
<html>
<head>
  <title>Python su Android</title>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="chrome=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <link rel="stylesheet" media="all" href="theme/css/default.css">
  <link rel="stylesheet" media="all" href="theme/css/tomamic.css">
  <link rel="stylesheet" media="only screen and (max-device-width: 480px)" href="theme/css/phone.css">
  <base target="_blank"> <!-- This amazingness opens all links in a new tab. -->
  <script data-main="js/slides" src="js/require-1.0.8.min.js"></script>
</head>
<body style="opacity: 0">

<slides class="layout-widescreen">

<slide class="title-slide segue nobackground">
  <aside class="gdbar"><img src="images/logo.png"></aside>
  <!-- The content of this hgroup is replaced programmatically through the slide_config.json. -->
  <h1 data-config-title><!-- populated from slide_config.json --></h1>
  <figure><img src="images/mobi/android-python.jpg"></figure>
  <hgroup>
    <h2>Introduzione alla programmazione</h2>
    <p>Michele Tomaiuolo<br>Ingegneria dell'Informazione, UniPR</p>
  </hgroup>
</slide>


<slide  >
  
    <hgroup>
      <h2>QPython</h2>
      <h3></h3>
    </hgroup>
    <article >
      <figure>
        <img src="images/mobi/qpython-00.png">
        
      </figure><ul>
<li>App scaricabile dallo <em>store</em> Android<ul>
<li>Gratuita ed open source</li>
<li>Supporta Python 2</li>
<li>Include ed estende Py4A, per l'accesso al dispositivo</li>
<li>Include vari moduli, tra cui Kivy</li>
</ul>
</li>
<li>QPython3 supporta Python 3<ul>
<li>Include Py4A</li>
<li>Ma pochi altri moduli</li>
</ul>
</li>
</ul>
<blockquote></blockquote>
<p><a href="http://qpython.org/">http://qpython.org/</a></p>
<p><a href="http://python3porting.com/differences.html">http://python3porting.com/differences.html</a></p></article>
 
</slide>

<slide  >
  
    <hgroup>
      <h2>QPython, sviluppo su/per Android</h2>
      <h3></h3>
    </hgroup>
    <article >
      <figure>
        <img src="images/mobi/qpython-02.png"><img src="images/mobi/qpython-03.png">
        
      </figure><p><img alt="" src="images/mobi/qpython-05.png" /></p>
<blockquote></blockquote>
<p>Preferibile -- chiaramente -- l'uso di una tastiera fisica</p>
<p>In alternativa, QPython include un server FTP sul cell/tablet</p></article>
 
</slide>

<slide  >
  
    <hgroup>
      <h2>Hello, Py4A developer!</h2>
      <h3></h3>
    </hgroup>
    <article >
      <figure>
        <img src="images/mobi/qpython-10.png">
        
      </figure><pre class="prettyprint" data-lang="Python"><code>import androidhelper
droid = androidhelper.Android()
respond = droid.dialogGetInput(
    "Hello", "What is your name?")
print respond
name = respond.result
if name:
    message = 'Hello, %s!' % name
else:
    message = "Hey! And you're not very polite, %Username%!"
droid.makeToast(message)
</code></pre></article>
 
</slide>

<slide  >
  
    <hgroup>
      <h2>Le facade di Py4A</h2>
      <h3></h3>
    </hgroup>
    <article >
      <ul>
<li><code>ActivityResult, Android, ApplicationManager</code></li>
<li><code>BatteryManager, Bluetooth</code></li>
<li><code>Camera, CommonIntents, Contacts</code></li>
<li><code>Event, Location</code></li>
<li><code>MediaPlayer, MediaRecorder</code></li>
<li><code>Phone, Preferences</code></li>
<li><code>SensorManager, Settings, SignalStrength</code></li>
<li><code>Sms, SpeechRecognition</code></li>
<li><code>TextToSpeech, ToneGenerator</code></li>
<li><code>Ui, WakeLock, WebCam, Wifi</code></li>
</ul>
<blockquote></blockquote>
<p><a href="https://code.google.com/p/android-scripting/">https://code.google.com/p/android-scripting/</a></p></article>
 
</slide>

<slide  >
  
    <hgroup>
      <h2>Kivy</h2>
      <h3></h3>
    </hgroup>
    <article >
      <figure>
        <img src="images/mobi/kivy-logo.png">
        
      </figure><ul>
<li>Libreria moderna e flessibile, per interfacce grafiche</li>
<li>Portabile tra diversi sistemi<ul>
<li><em>Desktop</em> (Windows, MacOS, Linux)</li>
<li><em>Mobile</em> (Android, iOS)</li>
</ul>
</li>
<li>Efficiente, usa le primitive grafiche di <em>OpenGL</em></li>
<li>Vari widget, creabili da codice Python...</li>
<li>Oppure da semplici descrizioni <em>kv</em></li>
</ul>
<blockquote></blockquote>
<p><a href="http://kivy.org/">http://kivy.org/</a></p></article>
 
</slide>

<slide  >
  
    <hgroup>
      <h2>Hello Notepad</h2>
      <h3></h3>
    </hgroup>
    <article >
      <figure>
        <img src="images/oop/tk-notepad-1.png">
        
      </figure><pre class="prettyprint" data-lang="Python"><code>from kivy.base import runTouchApp
from kivy.uix.textinput import TextInput

t = TextInput(text='Hello, world', multiline=True)
runTouchApp(t)
</code></pre></article>
 
</slide>

<slide  >
  
    <hgroup>
      <h2>Disposizione widget</h2>
      <h3></h3>
    </hgroup>
    <article >
      <ul>
<li>Kivy usa il meccanismo dei <em>layout</em> per disporre i widget</li>
<li>Ci sono vari meccanismi di disposizione, tra cui:<ul>
<li>Orizzontale: <code>BoxLayout(orientation='horizontal')</code></li>
<li>Verticale: <code>BoxLayout(orientation='vertical')</code></li>
<li>Griglia: <code>GridLayout(cols=4)</code></li>
</ul>
</li>
<li>I layout sono sottoclassi di <code>Widget</code></li>
<li>Disposizioni pi√π complesse, tramite composizione di vari layout</li>
</ul></article>
 
</slide>

<slide  >
  
    <hgroup>
      <h2>Aggiungere un bottone</h2>
      <h3></h3>
    </hgroup>
    <article >
      <figure>
        <img src="images/oop/tk-notepad-2.png">
        
      </figure><pre class="prettyprint" data-lang="Python"><code>from kivy.app import runTouchApp, stopTouchApp  # ...

class Notepad(BoxLayout):
    def __init__(self):
        BoxLayout.__init__(self,
                           orientation='vertical')
        txt = TextInput(text='Hello world',
                        multiline=True)
        btn = Button(text='Quit', size_hint_y=None)
        btn.bind(on_release=lambda btn: stopTouchApp())

        self.add_widget(txt)
        self.add_widget(btn)

if __name__ == '__main__':
    runTouchApp(Notepad())
</code></pre></article>
 
</slide>

<slide  >
  
    <hgroup>
      <h2>Riquadri compositi</h2>
      <h3></h3>
    </hgroup>
    <article >
      <figure>
        <img src="images/oop/tk-notepad-3.png">
        
      </figure><pre class="prettyprint" data-lang="Python"><code>class Notepad(BoxLayout):
    def __init__(self):
        BoxLayout.__init__(self,
                           orientation='horizontal')
        txt = TextInput(text='Hello world',
                        multiline=True)
        b1 = Button(text='Open')
        b2 = Button(text='Save')
        b3 = Button(text='Exit')
        b3.bind(on_release=lambda btn: stopTouchApp())

        bar = BoxLayout(orientation='vertical', 
                        size_hint=(None, None), pos_hint={'top': 1})
        bar.add_widget(b1); bar.add_widget(b2); bar.add_widget(b3)

        self.add_widget(txt); self.add_widget(bar)
</code></pre></article>
 
</slide>

<slide  >
  
    <hgroup>
      <h2>Widget e grafica</h2>
      <h3></h3>
    </hgroup>
    <article >
      <figure>
        <img src="images/mobi/kivy-coord.png">
        
      </figure><pre class="prettyprint" data-lang="Python"><code>from kivy.base import runTouchApp  # ...

class GameWidget(Widget):
    def __init__(self):
        Widget.__init__(self)
        with self.canvas:
            Color(0, 1, 0)
            Rectangle(pos=(20, 10),
                      size=(80, 40))

if __name__ == '__main__':
    runTouchApp(GameWidget())
</code></pre></article>
 
</slide>

<slide  >
  
    <hgroup>
      <h2>Multi-touch</h2>
      <h3></h3>
    </hgroup>
    <article >
      <figure>
        <img src="images/mobi/kivy-android.jpg">
        
      </figure><pre class="prettyprint" data-lang="Python"><code>class GameWidget(Widget):

    def on_touch_down(self, touch):
        print(touch.x, touch.y, touch.uid)

    def on_touch_move(self, touch):
        print(touch.x, touch.y, touch.uid)

    def on_touch_up(self, touch):
        print(touch.x, touch.y, touch.uid)
</code></pre>
<p>http://kivy.org/docs/guide/firstwidget.html</p></article>
 
</slide>

<slide  >
  
    <hgroup>
      <h2>Ridisegno periodico</h2>
      <h3></h3>
    </hgroup>
    <article >
      <figure>
        <img src="images/mobi/kivy-coord.png">
        
      </figure><pre class="prettyprint" data-lang="Python"><code>class GameWidget(Widget):
    def __init__(self):  # ...
        self._x = 20
        Clock.schedule_interval(self.advance_game,
                                1 / 30)
    def advance_game(self, dt):
        self._x += 5
        if self._x &gt; 200: self._x = 20
        self.draw_game()

    def draw_game(self):
        self.canvas.clear()
        with self.canvas:
            Color(0, 1, 0)
            Rectangle(pos=(self._x, 10), size=(80, 40))
</code></pre>
<p><a href="https://github.com/tomamic/fondinfo/blob/master/arena/bounce_kivy.py">https://github.com/tomamic/fondinfo/blob/master/arena/bounce_kivy.py</a></p></article>
 
</slide>

<slide  >
  
    <hgroup>
      <h2>Tastiera</h2>
      <h3></h3>
    </hgroup>
    <article >
      <figure>
        <img src="images/misc/typewriter-caps-lock.jpg">
        
      </figure><pre class="prettyprint" data-lang="Python"><code>class GameWidget(Widget):
    def __init__(self):  # ...
        self._kbd = Window.request_keyboard(
            self.kbd_closed, self)
        self._kbd.bind(on_key_down=self.kbd_down)

    def kbd_closed(self):
        print('My keyboard have been closed!')
        self._kbd.unbind(on_key_down=self.kbd_down)
        self._kbd = None

    def kbd_down(self, kbd, keycode, text, modifiers):
        print('Key pressed:', keycode, text, modifiers)            
        if keycode[1] == 'escape':  # keycode: (int, str)
            kbd.release()
        return True  # accept the key
</code></pre></article>
 
</slide>

<slide  >
  
    <hgroup>
      <h2>Fifteen ‚Äì Layout a griglia</h2>
      <h3></h3>
    </hgroup>
    <article >
      <figure>
        <img src="images/qt/puzzle.png">
        
      </figure><pre class="prettyprint" data-lang="Python"><code>class GridButton(Button):
    grid_pos = ListProperty((0, 0))  # Kivy

class GameGui(GridLayout):
    def __init__(self, game: Game):
        self.__game = game
        self.__cols, self.__rows = game.size()
        GridLayout.__init__(self, cols=self.__cols)

        for y in xrange(0, self.__rows):
            for x in xrange(0, self.__cols):
                btn = GridButton(grid_pos=(x, y))
                btn.bind(on_release=self.handle_click)
                self.add_widget(btn)
        self.update_all_buttons()
    # ...
</code></pre></article>
 
</slide>

<slide  >
  
    <hgroup>
      <h2>Fifteen ‚Äì Aggiornamento bottoni</h2>
      <h3></h3>
    </hgroup>
    <article >
      <pre class="prettyprint" data-lang="Python"><code>class GameGui(GridLayout):
    # ...
    def update_button(self, x: int, y: int):
        val = self.__game.get_val(x, y)
        b = self.children[-1 - y * self.__cols - x]
        b.text = val  # children are reversed, in Kivy

    def update_all_buttons(self):
        for y in range(self.__rows):
            for x in range(self.__cols):
                self.update_button(x, y)
    # ...
</code></pre></article>
 
</slide>

<slide  >
  
    <hgroup>
      <h2>Fifteen ‚Äì Click</h2>
      <h3></h3>
    </hgroup>
    <article >
      <pre class="prettyprint" data-lang="Python"><code>class GameGui(GridLayout):
    # ...
    def handle_click(self, btn: GridButton):
        self.__game.play_at(*btn.grid_pos)  # args unpacking
        self.update_all_buttons()

        if self.__game.finished():
            popup = Popup(title='Game finished',
                          content=Button(text=self.__game.message()))
            popup.content.bind(on_release=popup.dismiss)
            popup.open()
            stopTouchApp()
</code></pre>
<p><a href="https://github.com/tomamic/fondinfo/blob/master/examples/x7_fifteen_kivy.py">https://github.com/tomamic/fondinfo/blob/master/examples/x7_fifteen_kivy.py</a></p></article>
 
</slide>


<slide class="thank-you-slide segue nobackground">
  <aside class="gdbar right"><img src="images/logo.png"></aside>
  <article class="flexbox vleft auto-fadein">
    <h2>&lt;Domande?&gt;</h2>
  </article>
  <p class="auto-fadein" data-config-contact>
    Michele Tomaiuolo
    <br>
    Palazzina 1, int. 5708
    <br>
    Ingegneria dell'Informazione, UniPR
    <br>
    <a href="http://www.ce.unipr.it/people/tomamic">www.ce.unipr.it/people/tomamic</a>
  </p>
</slide>

<slide class="backdrop"></slide>

</slides>

</body>
</html>